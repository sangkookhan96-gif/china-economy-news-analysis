# PRD Step 2: 레시피 생성

## 목표

1단계에서 인식된 재료를 바탕으로 DeepSeek 모델이 레시피를 생성

### 사용 모델
- **AI Model**: OpenRouter API - `deepseek/deepseek-r1-0528:free`

---

## 기능 요구사항

| ID | 기능 | 설명 | 우선순위 |
|----|------|------|----------|
| 2.1 | 레시피 생성 | 재료 목록을 기반으로 레시피 생성 | P0 |
| 2.2 | 다중 레시피 | 2-3개의 레시피 옵션 제공 | P0 |
| 2.3 | 레시피 상세 | 요리명, 재료, 조리 시간, 단계별 조리법 포함 | P0 |
| 2.4 | 요리 난이도 | 쉬움/보통/어려움 난이도 표시 | P1 |
| 2.5 | 추가 재료 안내 | 없는 재료 중 추가하면 좋은 재료 안내 | P2 |

---

## API 엔드포인트

```
POST /api/generate-recipe
- Request: { "ingredients": ["당근", "양파", "계란"] }
- Response: {
    "recipes": [
      {
        "name": "야채 볶음밥",
        "difficulty": "쉬움",
        "time": "15분",
        "servings": "2인분",
        "ingredients": [
          {"name": "당근", "amount": "1개"},
          {"name": "양파", "amount": "1/2개"},
          {"name": "계란", "amount": "2개"},
          {"name": "밥", "amount": "1공기"}
        ],
        "steps": [
          "1. 당근과 양파를 잘게 다진다.",
          "2. 팬에 기름을 두르고 야채를 볶는다.",
          "3. 밥을 넣고 함께 볶는다.",
          "4. 계란을 풀어 넣고 섞는다.",
          "5. 소금, 후추로 간을 맞춘다."
        ],
        "missing_ingredients": ["밥", "식용유", "소금"]
      },
      ...
    ]
  }
```

---

## 화면 구성

### 레시피 목록 화면
- 추천 레시피 카드 목록 (그리드 레이아웃)
- 각 카드 표시 정보:
  - 요리명
  - 난이도 뱃지 (쉬움/보통/어려움)
  - 조리 시간
  - 인분 수
- "상세보기" 버튼

### 레시피 상세 모달/페이지
- 요리명 (제목)
- 메타 정보 (난이도, 시간, 인분)
- 필요한 재료 목록
  - 보유 재료: 체크 표시
  - 부족한 재료: 별도 표시
- 단계별 조리법
- "저장하기" 버튼 (3단계에서 활성화)
- "다른 레시피 보기" 버튼

---

## 프로젝트 구조 변경

```
study-04/
├── app.py                 # 레시피 생성 라우트 추가
├── ...
│
├── static/
│   ├── css/
│   │   └── style.css      # 레시피 카드 스타일 추가
│   └── js/
│       └── main.js        # 레시피 생성/표시 로직 추가
│
└── templates/
    └── index.html         # 레시피 섹션 추가
```

---

## 상세 구현 사항

### 1. 레시피 생성 프롬프트
```
다음 재료들로 만들 수 있는 요리 레시피 3개를 추천해주세요.

재료: {ingredients}

다음 JSON 형식으로만 응답해주세요:
{
  "recipes": [
    {
      "name": "요리명",
      "difficulty": "쉬움|보통|어려움",
      "time": "조리시간",
      "servings": "인분",
      "ingredients": [
        {"name": "재료명", "amount": "양"}
      ],
      "steps": ["조리 단계 1", "조리 단계 2"],
      "missing_ingredients": ["부족한 재료"]
    }
  ]
}
```

### 2. 프론트엔드 추가 기능
- 레시피 카드 컴포넌트
- 레시피 상세 모달
- 난이도별 색상 뱃지
- 재료 보유/부족 표시
- 로딩 상태 처리

### 3. UX 플로우
1. 재료 인식 완료 후 "레시피 추천받기" 버튼 활성화
2. 버튼 클릭 시 로딩 표시
3. 레시피 카드 목록 표시
4. 카드 클릭 시 상세 모달 오픈
5. "다시 추천받기"로 새로운 레시피 요청 가능

---

## 완료 조건

- [ ] 레시피 생성 API 엔드포인트 구현
- [ ] DeepSeek 모델 연동
- [ ] JSON 파싱 및 에러 처리
- [ ] 레시피 카드 UI 구현
- [ ] 레시피 상세 모달 구현
- [ ] 난이도/시간 뱃지 스타일링
- [ ] 부족한 재료 표시 기능
