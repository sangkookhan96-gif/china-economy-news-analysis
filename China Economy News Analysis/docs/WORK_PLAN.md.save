# WORK_PLAN

# WORK PLAN (Approved)

- Project: 뉴스 플랫폼
- Approved Date: 2026-02-05
- Status: Locked
- Source: Claude Code

---

## 1. 문서 목적
이 문서는 승인된 작업 계획의 단일 기준 문서이다.
이 문서에 명시된 내용은 초안이 아니며,
이후 작업의 전제로만 사용된다.

---

## 2. 현재 플랫폼 상태
- 웹 공개용 설계 완료
- 모바일 공개용 계획 완료
- 관리자 모드 거의 완성 단계

---

## 3. 사용자 콘텐츠 노출 순서 (변경 불가)
1. 뉴스 제목
2. 전문가 리뷰
3. 원문 (기본 접힘)

---

## 4. 작업 범위
- 콘텐츠 생성 및 정리
- 전문가 리뷰 품질 유지
- 게시 전 검증

UI/UX 재설계, 화면 구성 변경은 작업 범위에 포함되지 않는다.

---

## 5. 단계별 작업 계획
1. 콘텐츠 파이프라인 고정
2. 전문가 리뷰 생성 기준 적용
3. 원문 노출 정책 유지
4. 게시 전 최종 검증

 # 사용자 노출 파이프라인 구현 확정안                                     
                                                                          
 **확정일**: 2026-02-05                                                   
 **상태**: 최종 승인 완료 — 이후 변경 불가                                
 **기술 스택**: Flask + Jinja2 + Vanilla CSS/JS (Google Material 감성)    
 **전제**: 관리자 대시보드(Streamlit :8501)는 완성 상태이며, 사용자
 서버는 별도 포트(:8502)로 운영된다.

 ---

 ## 1단계: 데이터 API 계층 구축

 `src/api/public_feed.py`를 생성한다. `get_published_news(limit, offset)`
  source, date, importance, category, summary로 확정되었다.

 ## 2단계: Flask 사용자 서버 + 라우팅

 `src/web/app.py`와 `run_web.py`를 생성한다. 라우팅은 `GET /`(오늘의
 피드), `GET /archive`(날짜별 아카이브), `GET /news/<id>`(개별 상세·공유
 링크)로 구성된다. 1단계의 피드 함수를 호출하여 Jinja2 템플릿에 전달하며,
  날짜별(오늘/어제/이전) 그룹핑을 적용한다.

 ## 3단계: 웹 UI 구현 (데스크톱 + Material Design)

 `templates/`에 base.html, feed.html, news_detail.html을, `static/`에
 style.css, main.js를 배치한다. 카드 1개 = 뉴스 1건이며, 정보 순서는
 **카테고리 배지+날짜 → 제목 → 전문가 해설 → 원문(접힘)** 으로
 고정되었다. 폰트는 Noto Sans KR + Roboto, 카드 폭 max-width 720px, 리뷰
 영역은 #f8f9fa 배경 + 좌측 파란 보더, 원문은 #f1f3f4 배경으로 시각
 분리한다. 중요도 배지는 0.8+/0.6+/0.4+/기타 4단계 색상이다. JS는
 Vanilla로 원문 접기/펼치기를 구현한다.

 ## 4단계: 모바일 반응형 최적화

 `@media max-width: 768px` 기준으로 분기한다. 카드 폭 100%-16px, 제목
 20px+2줄 말줄임, 원문 버튼은 전폭(높이 48px), 원문 영역은 max-height
 60vh + 내부 스크롤로 처리한다. 접기 버튼은 원문 내부에 배치하여 뒤로가기
  없이 접을 수 있다. Safe area와 viewport 메타태그를 적용한다.

 ## 5단계: 통합·배포·연결

 관리자가 리뷰를 저장하면 `expert_review_status`가 `commented`로
 전환되고, 사용자 피드는 이 상태만 쿼리하므로 별도 발행 버튼 없이 자동
 노출된다. 헤더에 "한상국의 쉬운 중국경제뉴스 해설"+날짜를 표시하고, 원문
  렌더링에는 XSS 방지(bleach)를 적용한다. 10건 단위 페이지네이션을
 사용한다.

 ---

 **파일 구조**: `src/api/public_feed.py` → `src/web/app.py` →
 `src/web/templates/` → `src/web/static/` → `run_web.py`
 **실행 순서**: 1→2→3→4→5 순차 진행, 각 단계는 이전 단계 완료를 전제한다.


## 6. 변경 규칙
- 본 문서는 승인된 계획이며 수정되지 않는다.
- 변경이 필요할 경우 새로운 문서를 생성한다.

## 프로젝트 개요
- 프로젝트: 중국 경제 뉴스 해설 플랫폼
- 상태: 사용자 공개 파이프라인 구현 중
- 기준 문서: ARCHITECTURE.md

---

## 승인된 작업 단계

1. 데이터 API 계층 구축 (public_feed.py)
2. Flask 사용자 서버 + 라우팅
3. 웹 UI 구현 (Material Design)
4. 모바일 반응형 최적화
5. 통합·배포·연결

---

## 작업 진행 상태

### 1단계: 데이터 API 계층 구축
- 상태: 진행 중
- 마지막 중단 지점:
  - src/api 디렉토리 생성 단계에서 중단

### 2~5단계
- 상태: 시작 전
- 차단 사유: 1단계 미완료

---

## 작업 규칙

- 본 WORK_PLAN은 승인된 계획이다.
- 단계 순서를 변경하지 않는다.
- 완료된 단계는 되돌리지 않는다.
